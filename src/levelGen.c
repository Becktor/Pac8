#include <stdio.h>
#include <ncurses.h>
#include <stdlib.h>
#include <time.h>

#define NELEMS(x)  (sizeof(x) / sizeof((x)[0]))
#define LEVELS 8
#define START_END_DEC 2
void draw(int *level, int tmp){

    if(level[tmp]==0){
        printw(" #");
    }else if(level[tmp]==1){
        printw("  ");
    }else if(level[tmp]==3){
        printw(" 8");
    }else if(level[tmp]==9){
        printw(" O");
    }

}

int * getLevel(int levelno)
{

    static int start0[100]={ 0,0,0,0,0,0,0,0,0,0,
                             0,3,1,1,1,1,1,1,1,0,
                             0,0,0,0,0,0,0,0,1,0,
                             0,1,1,1,1,1,1,0,1,0,
                             0,1,0,0,0,0,1,0,1,0,
                             0,1,1,1,1,0,1,0,1,0,
                             0,0,0,0,1,0,1,0,1,0,
                             0,1,9,0,1,0,1,0,1,0,
                             0,9,1,1,1,0,1,1,1,1,
                             0,0,0,0,0,0,0,0,0,0 };

    static int start1[100]={ 0,0,0,0,0,0,0,0,0,0,
                             0,3,1,1,0,9,1,1,1,0,
                             0,1,1,9,0,0,0,0,1,0,
                             0,1,0,0,0,9,1,0,1,0,
                             0,1,1,1,1,0,1,0,1,0,
                             0,1,0,0,1,0,1,0,1,0,
                             0,1,0,1,1,0,1,0,1,0,
                             0,1,0,1,0,0,1,0,1,0,
                             0,1,0,1,1,1,1,1,1,1,
                             0,0,0,0,0,0,0,0,0,0 };

    static int l0[100]={ 0,0,0,0,0,0,0,0,0,0,
                         1,1,1,0,1,1,1,0,1,1,
                         1,0,1,0,1,0,1,0,1,1,
                         1,0,1,0,1,0,1,0,1,1,
                         1,0,1,1,1,0,1,1,1,1,
                         1,0,0,0,0,0,0,0,0,0,
                         1,1,1,1,1,1,0,9,1,1,
                         1,1,0,1,0,1,0,1,0,1,
                         1,9,0,9,0,9,1,1,0,1,
                         0,0,0,0,0,0,0,0,0,0 };

    static int l1[100]={ 0,0,0,0,0,0,0,0,0,0,
                         0,1,1,1,1,1,1,0,9,0,
                         1,1,1,0,1,0,1,0,9,0,
                         1,0,9,0,1,0,1,0,9,0,
                         0,1,0,1,1,0,1,0,1,1,
                         1,1,1,1,0,1,1,0,1,1,
                         1,1,1,0,1,1,1,1,1,1,
                         1,1,0,1,1,1,1,1,0,1,
                         1,1,1,1,1,1,1,1,0,1,
                         0,0,0,0,0,0,0,0,0,0 };

    static int l2[100]={ 0,0,0,0,0,0,0,0,0,0,
                         1,1,1,1,1,1,1,0,9,0,
                         1,1,1,0,1,0,1,0,9,0,
                         1,0,9,0,1,0,1,0,9,0,
                         0,1,0,1,1,0,1,0,1,1,
                         1,1,1,1,0,0,0,0,1,1,
                         1,1,1,1,1,1,1,1,1,0,
                         1,1,0,1,1,1,1,1,0,1,
                         1,1,1,1,1,1,1,1,1,1,
                         0,0,0,0,0,0,0,0,0,0 };

    static int l3[100]={ 0,0,0,0,0,0,0,0,0,0,
                         1,1,1,1,1,1,1,1,1,1,
                         1,0,0,0,0,0,0,0,0,0,
                         1,1,1,1,1,1,1,1,1,1,
                         1,0,0,1,1,1,1,0,0,0,
                         1,0,1,0,1,1,0,1,1,1,
                         1,0,1,1,0,0,1,1,1,1,
                         1,0,1,1,1,1,1,9,1,1,
                         1,1,1,0,9,9,9,1,1,1,
                         0,0,0,0,0,0,0,0,0,0 };

    static int l4[100]={ 0,0,0,0,0,0,0,0,0,0,
                         1,0,1,1,1,1,1,1,0,1,
                         1,1,0,1,1,0,9,0,1,1,
                         1,1,1,0,1,1,0,1,1,1,
                         1,1,1,1,1,1,1,1,1,1,
                         1,1,1,1,1,1,1,1,1,1,
                         1,1,1,0,1,1,0,1,1,1,
                         1,1,0,9,0,1,1,0,1,1,
                         1,0,1,1,1,1,1,1,0,1,
                         0,0,0,0,0,0,0,0,0,0 };

    static int l5[100]={0,0,0,0,0,0,0,0,0,0,
                        1,0,1,1,1,1,1,1,1,1,
                        1,0,1,9,0,9,1,1,0,1,
                        1,1,1,0,0,0,1,1,0,1,
                        1,1,0,1,1,1,0,1,1,1,
                        1,1,0,1,1,1,0,1,1,1,
                        1,1,1,1,0,1,1,1,1,1,
                        1,1,1,1,0,1,1,1,1,1,
                        1,1,1,1,1,1,1,1,1,1,
                        0,0,0,0,0,0,0,0,0,0 };

    static int l6[100]={0,0,0,0,0,0,0,0,0,0,
                        1,1,1,1,1,1,1,1,1,0,
                        0,0,0,0,0,0,0,0,1,0,
                        0,1,1,9,0,1,1,1,1,0,
                        0,1,0,0,0,1,1,1,0,1,
                        0,1,1,1,1,1,1,0,1,1,
                        0,0,0,1,1,1,0,1,1,1,
                        1,1,1,1,1,0,1,1,1,1,
                        1,1,1,1,1,1,1,1,1,1,
                        0,0,0,0,0,0,0,0,0,0 };

    static int l7[100]={ 0,0,0,0,0,0,0,0,0,0,
                         1,1,1,1,1,1,1,1,1,1,
                         1,1,0,0,0,0,0,0,1,1,
                         1,0,1,1,1,1,1,1,0,1,
                         1,0,1,0,0,0,1,1,0,1,
                         1,0,1,0,9,9,0,1,0,1,
                         1,0,1,0,9,9,1,1,0,1,
                         1,0,1,1,0,0,0,0,1,1,
                         1,1,0,1,1,1,1,1,1,1,
                         0,0,0,0,0,0,0,0,0,0 };

    static int end0[100]={0,0,0,0,0,0,0,0,0,0,
                         1,0,1,1,0,1,1,1,1,0,
                         1,1,1,0,1,1,1,1,1,0,
                         1,1,0,1,1,0,0,0,1,0,
                         1,0,1,1,0,0,1,1,1,0,
                         0,1,1,0,1,0,1,0,0,0,
                         1,1,0,1,1,0,1,0,9,0,
                         1,0,1,1,0,0,1,0,9,0,
                         0,9,1,1,1,1,1,1,1,0,
                         0,0,0,0,0,0,0,0,0,0 };

    static int end1[100]={0,0,0,0,0,0,0,0,0,0,
                          1,0,1,1,1,1,1,1,1,0,
                          1,1,0,0,0,0,0,1,1,0,
                          0,1,0,1,1,1,1,1,1,0,
                          0,1,0,0,0,0,1,1,1,0,
                          0,1,1,1,1,0,1,0,0,0,
                          1,1,0,0,0,0,1,0,9,0,
                          1,1,1,1,1,1,1,0,9,0,
                          1,9,1,1,1,1,1,1,1,0,
                          0,0,0,0,0,0,0,0,0,0 };

    switch(levelno) {
    case 0 :
        return l0;
    case 1 :
        return l1;
    case 2 :
        return l2;
    case 3 :
        return l3;
    case 4 :
        return l4;
    case 5 :
        return l5;
    case 6 :
        return l6;
    case 7 :
        return l7;
    case 100 :
        return start0;
    case 101 :
        return start1;
    case 102 :
        return end0;
    case 103 :
        return end1;

    default :
        printf("no such level\n" );
    }
    return 0;
}
void genLevel(int size)
{
    int * level;
    int tmp[size-START_END_DEC];
    int end = rand()%2;
    int start = rand()%2;

    for(int i=0;i<size-START_END_DEC;i++){
        tmp[i]= rand()%LEVELS;
    }
    for(int i=0;i<11;i++){
        if(i<10){
            for(int k=0;k<size;k++){
                if (k==0)
                    level = getLevel(100+start);
                else if (k==size-1)
                    level = getLevel(102+end);
                else
                    level = getLevel(tmp[k-1]);

                for(int j=0;j<10;j++){
                    int tmpe= i*10+j;
                    draw(level,tmpe);
                }
            }
        }else
            for(int n = 0;n<size*10;n++) if(n<10) printw("0%i",n); else printw("%i",n);
        printw("\n");
    }
    mvprintw(12,0,"Points: %i",0);
    mvprintw(14,0,"Move with A S W D collect the points and avoid the beast");
    for(int i=0;i<size-2;i++){
        mvprintw(16+i,10,"levl: %i",tmp[i]);
    }


}

void drawPlayer(int playerPos, int * level){

    level[playerPos]=11;
}
